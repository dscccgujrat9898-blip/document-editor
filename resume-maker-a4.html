<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resume Maker (A4 Print/PDF Perfect)</title>

  <!-- html2pdf (PDF download) -->
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1b34;
      --card:#0f1b34;
      --txt:#e9f0ff;
      --muted:#a9b7d0;
      --line:rgba(255,255,255,.10);
      --btn:#2b5cff;
      --btn2:#1b2a4a;
      --danger:#ff4d4d;
      --a4w:210mm;
      --a4h:297mm;
      --pad:12mm;
    }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    body{
      margin:0;
      background:radial-gradient(1200px 600px at 20% 0%,#14264a 0%,#0b1220 55%,#070b14 100%);
      color:var(--txt);
    }
    header{
      position:sticky;top:0;z-index:20;
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      background:rgba(11,18,32,.92);
      backdrop-filter: blur(8px);
      display:flex;gap:12px;align-items:center;justify-content:space-between;
    }
    header .title{
      display:flex;flex-direction:column;gap:2px;
    }
    header h1{margin:0;font-size:16px;letter-spacing:.2px}
    header p{margin:0;color:var(--muted);font-size:12px}
    .wrap{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap:14px;
      padding:14px;
      max-width:1400px;
      margin:0 auto;
    }
    .panel{
      background:rgba(15,27,52,.72);
      border:1px solid var(--line);
      border-radius:14px;
      overflow:hidden;
    }
    .panel .head{
      padding:12px 12px;
      border-bottom:1px solid var(--line);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .panel .head b{font-size:13px}
    .panel .body{padding:12px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
    input, textarea{
      width:100%;
      padding:10px 10px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(10,16,32,.55);
      color:var(--txt);
      outline:none;
    }
    textarea{min-height:90px;resize:vertical}
    .row{display:flex;gap:10px;align-items:center}
    .row .chk{width:auto;transform:scale(1.1)}
    .btns{display:flex;gap:10px;flex-wrap:wrap}
    button{
      border:0;
      padding:10px 12px;
      border-radius:12px;
      color:white;
      background:var(--btn);
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    button.secondary{background:var(--btn2);border:1px solid var(--line)}
    button.danger{background:var(--danger)}
    .hint{color:var(--muted);font-size:12px;line-height:1.4}

    /* Preview area */
    .previewWrap{
      padding:12px;
      background:rgba(15,27,52,.38);
      border:1px solid var(--line);
      border-radius:14px;
      overflow:auto;
      min-height:calc(100vh - 96px);
    }

    /* A4 Pages */
    .pages{display:flex;flex-direction:column;gap:14px;align-items:center}
    .page{
      width:var(--a4w);
      height:var(--a4h);
      background:white;
      color:#111;
      border-radius:10px;
      box-shadow:0 18px 50px rgba(0,0,0,.35);
      overflow:hidden;
      position:relative;
    }
    .page .content{
      height:100%;
      padding:var(--pad);
    }

    /* Resume style (inside page) */
    .resumeHeader{
      display:flex;gap:12px;align-items:flex-start;justify-content:space-between;
      border-bottom:1px solid #e6e6e6;
      padding-bottom:8px;
      margin-bottom:10px;
    }
    .name{
      font-size:24px;
      font-weight:800;
      margin:0;
      line-height:1.1;
    }
    .role{
      margin:4px 0 0;
      font-size:12.5px;
      color:#333;
      font-weight:600;
    }
    .contact{
      text-align:right;
      font-size:11.5px;
      color:#333;
      line-height:1.4;
      max-width:40%;
      word-break:break-word;
    }
    .section{
      margin:10px 0 0;
    }
    .section h3{
      margin:0 0 6px;
      font-size:12px;
      letter-spacing:.7px;
      text-transform:uppercase;
      color:#111;
      border-left:3px solid #111;
      padding-left:8px;
    }
    .section p, .section li{
      margin:0;
      font-size:12px;
      color:#222;
      line-height:1.5;
    }
    ul{margin:0;padding-left:18px}
    .twoCol{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:12px;
    }
    .pillRow{display:flex;flex-wrap:wrap;gap:6px}
    .pill{
      font-size:11px;
      border:1px solid #d9d9d9;
      padding:4px 8px;
      border-radius:999px;
      background:#fafafa;
    }

    /* Blocks for pagination */
    .block{break-inside:avoid; page-break-inside:avoid}
    .small{font-size:11px;color:#333}

    /* PRINT */
    @page { size: A4; margin: 0; }
    @media print{
      body{background:white}
      header, .panel, .hintBar{display:none !important}
      .wrap{display:block;padding:0;margin:0}
      .previewWrap{border:0;padding:0;min-height:auto}
      .pages{gap:0}
      .page{
        box-shadow:none;
        border-radius:0;
        width:210mm;
        height:297mm;
        page-break-after:always;
      }
      .page:last-child{page-break-after:auto}
    }

    @media (max-width: 1050px){
      .wrap{grid-template-columns:1fr}
      .previewWrap{min-height:auto}
    }
  </style>
</head>

<body>
<header>
  <div class="title">
    <h1>Resume Maker (A4 Print/PDF Perfect)</h1>
    <p>GitHub Pages + Google Sites embed friendly • Multi-page auto</p>
  </div>
  <div class="btns">
    <button class="secondary" id="btnReset">Reset</button>
    <button class="secondary" id="btnPrint">Print / Save as PDF</button>
    <button id="btnPdf">Download PDF</button>
  </div>
</header>

<div class="wrap">
  <!-- LEFT: FORM -->
  <div class="panel">
    <div class="head">
      <b>Resume Details</b>
      <span class="hint">Typing se preview auto update</span>
    </div>
    <div class="body">
      <div class="grid2">
        <div>
          <label>Full Name</label>
          <input id="fullName" placeholder="e.g., Rahul Patel" value="Rahul Patel" />
        </div>
        <div>
          <label>Professional Title</label>
          <input id="title" placeholder="e.g., Data Entry Executive" value="Data Entry Executive" />
        </div>
      </div>

      <div class="grid2">
        <div>
          <label>Mobile</label>
          <input id="mobile" placeholder="e.g., 9898710036" value="9898710036" />
        </div>
        <div>
          <label>Email</label>
          <input id="email" placeholder="e.g., rahul@gmail.com" value="rahul@example.com" />
        </div>
      </div>

      <label>LinkedIn / Website (optional)</label>
      <input id="link" placeholder="e.g., linkedin.com/in/..." value="" />

      <div class="grid2">
        <div>
          <label>Permanent Address (manual)</label>
          <textarea id="addrPermanent" placeholder="Type address here...">Sai Ashirwad, Near Manjulaben Hospital, Opp Modi Hospital, Kadodara</textarea>
        </div>
        <div>
          <label>Temporary Address (manual)</label>
          <textarea id="addrTemp" placeholder="Type address here...">Sai Ashirwad, Near Manjulaben Hospital, Opp Modi Hospital, Kadodara</textarea>
          <div class="row" style="margin-top:8px">
            <input class="chk" type="checkbox" id="sameAddr" checked />
            <span class="small">Same as Permanent</span>
          </div>
        </div>
      </div>

      <label>Career Summary</label>
      <textarea id="summary" placeholder="2-4 lines...">Self-motivated professional with strong communication and computer skills. Seeking opportunities to contribute in a growth-oriented organization.</textarea>

      <div class="twoCol">
        <div>
          <label>Experience (one item per line)</label>
          <textarea id="experience" placeholder="e.g. 2024–2026: Company - Role - Key work...">2025–2026: DS Computer Classes - Trainer - Basic computer, MS Office, Internet
2023–2025: Freelance - Data Entry - Excel reports & documentation</textarea>

          <label>Education (one item per line)</label>
          <textarea id="education" placeholder="e.g. 2022: BCA - University - %">BCA (Running) - 5th Semester
12th - GSEB
10th - GSEB</textarea>

          <label>Projects / Achievements (optional, one per line)</label>
          <textarea id="projects" placeholder="e.g. Resume Builder Web App...">Resume Builder Web App (HTML/CSS/JS)
Computer lab setup & maintenance</textarea>
        </div>

        <div>
          <label>Skills (comma separated)</label>
          <textarea id="skills" placeholder="MS Office, Excel, Tally, ...">MS Office, Excel, Tally, Internet, Typing, Photoshop (basic), Communication</textarea>

          <label>Languages (comma separated)</label>
          <input id="langs" placeholder="Hindi, English, Gujarati" value="Hindi, English, Gujarati" />

          <label>Hobbies (comma separated)</label>
          <input id="hobbies" placeholder="Reading, Sports..." value="Learning new skills, Teaching, Reading" />

          <label>Declaration (optional)</label>
          <textarea id="declare" placeholder="Short declaration...">I hereby declare that the above information is true to the best of my knowledge.</textarea>
        </div>
      </div>

      <div style="margin-top:10px" class="hint">
        Tip: Print button se Chrome ka “Save as PDF” use karo — A4 multi-page proper aayega.
      </div>
    </div>
  </div>

  <!-- RIGHT: PREVIEW -->
  <div class="previewWrap">
    <div class="pages" id="pages"></div>
  </div>
</div>

<script>
  const $ = (id)=>document.getElementById(id);

  const inputs = [
    "fullName","title","mobile","email","link",
    "addrPermanent","addrTemp","sameAddr",
    "summary","experience","education","projects",
    "skills","langs","hobbies","declare"
  ].map(id=>$(id));

  function safeLines(text){
    return (text||"").split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
  }
  function safeCSV(text){
    return (text||"").split(",").map(s=>s.trim()).filter(Boolean);
  }

  function buildBlocks(data){
    // Each "block" must not split across pages (simple, reliable printing)
    const blocks = [];

    // Header block
    blocks.push(`
      <div class="block">
        <div class="resumeHeader">
          <div>
            <p class="name">${escapeHtml(data.fullName || "Your Name")}</p>
            <p class="role">${escapeHtml(data.title || "")}</p>
          </div>
          <div class="contact">
            ${data.mobile ? `<div>${escapeHtml(data.mobile)}</div>` : ``}
            ${data.email ? `<div>${escapeHtml(data.email)}</div>` : ``}
            ${data.link ? `<div>${escapeHtml(data.link)}</div>` : ``}
          </div>
        </div>
      </div>
    `);

    // Summary
    if(data.summary){
      blocks.push(`
        <div class="block section">
          <h3>Summary</h3>
          <p>${escapeHtml(data.summary)}</p>
        </div>
      `);
    }

    // Addresses
    blocks.push(`
      <div class="block section">
        <h3>Address</h3>
        <p><b>Permanent:</b> ${escapeHtml(data.addrPermanent || "-")}</p>
        <p style="margin-top:4px"><b>Temporary:</b> ${escapeHtml(data.addrTemp || "-")}</p>
      </div>
    `);

    // Two columns section (Experience/Education/Projects + Skills)
    const exp = safeLines(data.experience);
    const edu = safeLines(data.education);
    const proj = safeLines(data.projects);
    const skills = safeCSV(data.skills);
    const langs = safeCSV(data.langs);
    const hobbies = safeCSV(data.hobbies);

    blocks.push(`
      <div class="block twoCol" style="margin-top:10px">
        <div>
          ${exp.length ? `
            <div class="section">
              <h3>Experience</h3>
              <ul>${exp.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
            </div>` : ``}

          ${edu.length ? `
            <div class="section" style="margin-top:10px">
              <h3>Education</h3>
              <ul>${edu.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
            </div>` : ``}

          ${proj.length ? `
            <div class="section" style="margin-top:10px">
              <h3>Projects / Achievements</h3>
              <ul>${proj.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
            </div>` : ``}
        </div>

        <div>
          ${skills.length ? `
            <div class="section">
              <h3>Skills</h3>
              <div class="pillRow">${skills.map(x=>`<span class="pill">${escapeHtml(x)}</span>`).join("")}</div>
            </div>` : ``}

          ${langs.length ? `
            <div class="section" style="margin-top:10px">
              <h3>Languages</h3>
              <p>${langs.map(escapeHtml).join(", ")}</p>
            </div>` : ``}

          ${hobbies.length ? `
            <div class="section" style="margin-top:10px">
              <h3>Hobbies</h3>
              <p>${hobbies.map(escapeHtml).join(", ")}</p>
            </div>` : ``}
        </div>
      </div>
    `);

    // Declaration
    if(data.declare){
      blocks.push(`
        <div class="block section" style="margin-top:10px">
          <h3>Declaration</h3>
          <p>${escapeHtml(data.declare)}</p>
        </div>
      `);
    }

    return blocks;
  }

  // Pagination: place blocks into A4 pages; if overflow -> new page
  function render(){
    // Same address checkbox logic
    if ($("sameAddr").checked){
      $("addrTemp").value = $("addrPermanent").value;
      $("addrTemp").setAttribute("readonly","readonly");
      $("addrTemp").style.opacity = "0.9";
    } else {
      $("addrTemp").removeAttribute("readonly");
      $("addrTemp").style.opacity = "1";
    }

    const data = {
      fullName: $("fullName").value,
      title: $("title").value,
      mobile: $("mobile").value,
      email: $("email").value,
      link: $("link").value,
      addrPermanent: $("addrPermanent").value,
      addrTemp: $("addrTemp").value,
      summary: $("summary").value,
      experience: $("experience").value,
      education: $("education").value,
      projects: $("projects").value,
      skills: $("skills").value,
      langs: $("langs").value,
      hobbies: $("hobbies").value,
      declare: $("declare").value
    };

    const pagesEl = $("pages");
    pagesEl.innerHTML = "";

    // Create first page
    let page = newPage();
    pagesEl.appendChild(page);

    const contentEl = page.querySelector(".content");

    // Max usable height (clientHeight accurate inside mm box)
    const maxH = contentEl.clientHeight;

    const blocks = buildBlocks(data).map(html=>{
      const div = document.createElement("div");
      div.innerHTML = html.trim();
      return div.firstElementChild;
    });

    for(const block of blocks){
      contentEl.appendChild(block);
      // overflow check
      if(contentEl.scrollHeight > maxH + 2){
        contentEl.removeChild(block);
        page = newPage();
        pagesEl.appendChild(page);
        page.querySelector(".content").appendChild(block);
      }
    }
  }

  function newPage(){
    const page = document.createElement("div");
    page.className = "page";
    page.innerHTML = `<div class="content"></div>`;
    return page;
  }

  function escapeHtml(str){
    return String(str || "")
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // Events
  for(const el of inputs){
    el.addEventListener("input", ()=>{ render(); });
    el.addEventListener("change", ()=>{ render(); });
  }

  $("btnPrint").addEventListener("click", ()=>window.print());

  $("btnPdf").addEventListener("click", async ()=>{
    // PDF uses the same pages container; html2pdf respects page breaks well
    const element = document.getElementById("pages");
    const opt = {
      margin:       0,
      filename:     'resume.pdf',
      image:        { type: 'jpeg', quality: 0.98 },
      html2canvas:  { scale: 2, useCORS: true },
      jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
      pagebreak:    { mode: ['css', 'legacy'] }
    };
    await html2pdf().set(opt).from(element).save();
  });

  $("btnReset").addEventListener("click", ()=>{
    if(confirm("Reset all fields?")){
      location.reload();
    }
  });

  // First render
  render();
</script>
</body>
</html>
